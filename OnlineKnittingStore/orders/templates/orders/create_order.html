{% extends "base.html" %}
{% load static %}

{% block local_css %}
    <link rel="stylesheet" href="{% static 'css/my_style.css' %}">
{% endblock local_css %}

{% block content %}
<section id="order" style="padding: 95px 0;">
    <div class="container py-4">

        <!-- ВЫБРАННЫЕ ТОВАРЫ -->
        <div class="card p-4 shadow-sm mb-4">

            <h4 class="mb-4 text-center fw-semibold">Выбранные товары</h4>

            <div id="cart-items-container">
                {% include 'carts/includes/included_cart.html' %}
            </div>
        </div>

        <!-- ДЕТАЛИ ЗАКАЗА -->
        <div class="card p-4 shadow-sm">

            <h4 class="mb-4 text-center fw-semibold">Детали заказа</h4>

            <div class="card-body p-0">
                <form action="{% url 'orders:create_order' %}" method="post">
                    {% csrf_token %}
                    <div class="row g-3">

                        <div class="col-md-6 mb-3">
                            <label for="id_first_name" class="form-label">Имя *</label>
                            <input type="text" class="form-control" id="id_first_name"
                                   value="{% if form.first_name.value %}{{ form.first_name.value }}{% endif %}"
                                   name="first_name" required>
                            {% if form.first_name.errors %}
                                <div class="alert alert-danger alert-dismissible fade show">{{form.first_name.errors}}</div>
                            {% endif %}
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="id_last_name" class="form-label">Фамилия *</label>
                            <input type="text" class="form-control" id="id_last_name"
                                   value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}"
                                   name="last_name" required>
                            {% if form.last_name.errors %}
                                <div class="alert alert-danger alert-dismissible fade show">{{form.last_name.errors}}</div>
                            {% endif %}
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="id_phone_number" class="form-label">Номер телефона *</label>
                            <input type="text" class="form-control" id="id_phone_number"
                                   name="phone_number"
                                   value="{% if form.phone_number.value %}{{ form.phone_number.value }}{% endif %}"
                                   placeholder="В формате: XXX-XXX-XX-XX"
                                   required>
                            {% if form.phone_number.errors %}
                                <div class="alert alert-danger alert-dismissible fade show">{{form.phone_number.errors}}</div>
                            {% endif %}
                        </div>

                        <!-- ДОСТАВКА -->
                        <div class="col-md-12 mb-3">
                            <label for="delivery" class="form-label">Способ доставки: </label>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="requires_delivery"
                                       id="id_requires_delivery" value="1" checked>
                                <label class="form-check-label" for="id_requires_delivery">Нужна
                                    доставка</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="requires_delivery"
                                       id="id_requires_delivery" value="0">
                                <label class="form-check-label" for="id_requires_delivery">Самовывоз</label>
                            </div>
                        </div>

                        <!-- АДРЕС -->
                        <div class="col-md-12 mb-3" id="deliveryAddressField">
                            <label for="id_delivery_address" class="form-label">Адрес доставки *</label>
                            <textarea class="form-control" id="id_delivery_address"
                                      value="{% if form.delivery_address.value %}{{ form.delivery_address.value }}{% endif %}"
                                      name="delivery_address" rows="2"></textarea>
                            {% if form.delivery_address.errors %}
                                <div class="alert alert-danger alert-dismissible fade show">{{form.delivery_address.errors}}</div>
                            {% endif %}
                        </div>

                        <!-- ОПЛАТА -->
                        <div class="col-md-12 mb-3">
                            <label class="form-label">Способ оплаты: </label>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="payment_on_get"
                                       id="id_payment_on_get" value="0" checked>
                                <label class="form-check-label" for="id_payment_on_get">Оплата
                                    картой</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="payment_on_get"
                                       id="id_payment_on_get" value="1">
                                <label class="form-check-label" for="id_payment_on_get">Наличными/картой
                                    при плучении</label>
                                {% if form.payment_on_get.errors %}
                                    <div class="alter alter-danger alter-dismissible fade show">{{form.payment_on_get.errors}}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="d-grid mt-4">
                        <button type="submit" class="btn btn-dark btn-lg">
                            Оформить заказ
                        </button>
                    </div>

                </form>
            </div>
        </div>

    </div>
</section>
{% endblock content %}